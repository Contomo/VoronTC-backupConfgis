[include mainsail.cfg]

[include others/printer-essential.cfg]
[include others/fans.cfg]
[include others/leds.cfg]
[include others/tempsensors-misc.cfg]


[include tools/Toolhead-3-EBB36-Dragon-HF-Nozzle4.cfg]
[include tools/Toolhead-2-EBB36-Dragon-TZ-V6-Nozzle6.cfg]
[include tools/Toolhead-1-EBB36-Dragon-TZ-V6-Nozzle2.cfg]
[include tools/Toolhead-0-EBB36-Dragon-TZ-V6-Nozzle4.cfg]

[include toolchanger/toolchanger-leds.cfg]
[include toolchanger/tool_detection.cfg]
[include toolchanger/toolchanger.cfg]

[include macros/calibrate-offsets.cfg]
[include macros/macros.cfg]
[include macros/gantry-adjust-homing.cfg]
[include macros/clean-nozzle.cfg]
[include macros/M104-M109.cfg]


[printer]
kinematics: corexy
max_velocity: 2000  
max_accel: 9800             #Max 4000
max_z_velocity: 400          #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 1000
square_corner_velocity: 5.0


[input_shaper]
shaper_freq_x: 57.6 #9800 accel
shaper_type_x: mzv
shaper_freq_y: 42
shaper_type_Y: mzv #5200 accel

[resonance_tester]
 accel_chip: adxl345 T0
 probe_points:
     175, 175, 20 



[force_move]
enable_force_move: True

[respond]

[pause_resume]

[save_variables]
filename:  ~/variables.cfg

[gcode_arcs]
resolution: 0.2

[rounded_path]
resolution: 0.2
replace_g0: False #replace_g0: True






#####################################################################
#   Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 7200
 






########################################
# EXP1 / EXP2 (display) pins
########################################

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,    # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,      # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<5V>



[gcode_macro _CLIENT_VARIABLE]
variable_use_custom_pos   : True ; use custom park coordinates for x,y [True/False]
variable_custom_park_x    : 175.0   ; custom x position; value must be within your defined min and max of X
variable_custom_park_y    : 300.0   ; custom y position; value must be within your defined min and max of Y
variable_custom_park_dz   : 2.0   ; custom dz value; the value in mm to lift the nozzle when move to park position
variable_retract          : 1.0   ; the value to retract while PAUSE
variable_cancel_retract   : 5.0   ; the value to retract while CANCEL_PRINT
variable_speed_retract    : 35.0  ; retract speed in mm/s
variable_unretract        : 1.0   ; the value to unretract while RESUME
variable_speed_unretract  : 35.0  ; unretract speed in mm/s
variable_speed_hop        : 15.0  ; z move speed in mm/s
variable_speed_move       : 100.0 ; move speed in mm/s
variable_park_at_cancel   : True ; allow to move the toolhead to park while execute CANCEL_PRINT [True/False]
variable_park_at_cancel_x : 175.0  ; different park position during CANCEL_PRINT [None/Position as Float]; park_at_cancel must be True
variable_park_at_cancel_y : 300.0  ; different park position during CANCEL_PRINT [None/Position as Float]; park_at_cancel must be True
# !!! Caution [firmware_retraction] must be defined in the printer.cfg if you set use_fw_retract: True !!!
variable_use_fw_retract   : False ; use fw_retraction instead of the manual version [True/False]
variable_idle_timeout     : 0     ; time in sec until idle_timeout kicks in. Value 0 means that no value will be set or restored
gcode:



#[ktamv]
#nozzle_cam_url: http://localhost/webcam/snapshot?max_delay=0
#server_url: http://localhost:8085
#move_speed: 1800
#send_frame_to_cloud: true
#detection_tolerance: 0

#[include ktamv-macros.cfg]


[tool_probe T0]
#z_offset = -0.511750

[tool_probe T1]
#z_offset = -0.428000

[tool T1]
#gcode_x_offset = -0.306250
#gcode_y_offset = -0.837500
#gcode_z_offset = 0.335000

[tool_probe T2]
#z_offset = -0.579250

[tool T2]
#gcode_x_offset = -0.587500
#gcode_y_offset = -0.875000
#gcode_z_offset = -0.357500

[tool_probe T3]
#z_offset = -1.06175

[tool T3]
#gcode_x_offset = -0.800000
#gcode_y_offset = -1.287500
#gcode_z_offset = 0.026250

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [tool_probe T0]
#*# z_offset = -0.493000
#*#
#*# [tool T1]
#*# gcode_x_offset = -0.309375
#*# gcode_y_offset = -0.835938
#*# gcode_z_offset = 0.337500
#*#
#*# [tool_probe T1]
#*# z_offset = -0.427375
#*#
#*# [tool T2]
#*# gcode_x_offset = -0.600000
#*# gcode_y_offset = -0.862500
#*# gcode_z_offset = -0.361250
#*#
#*# [tool_probe T2]
#*# z_offset = -0.567375
#*#
#*# [tool T3]
#*# gcode_x_offset = -0.818750
#*# gcode_y_offset = -1.278125
#*# gcode_z_offset = 0.020625
#*#
#*# [tool_probe T3]
#*# z_offset = -1.042375
